---
# ============================================================
# Nginx Reverse Proxy + Let's Encrypt (Certbot)
# Subdomains on secforit.ro
# ============================================================

domain_name: "secforit.ro"
certbot_email: "lismanrazvan420@gmail.com"

# Nginx settings
nginx_worker_processes: "auto"
nginx_worker_connections: 1024

# Virtual hosts (reverse proxy targets)
nginx_vhosts:
  - server_name: "siem.{{ domain_name }}"
    proxy_pass: "https://127.0.0.1:5601"
    proxy_ssl: true
    ssl_verify: false
    description: "Wazuh Dashboard"

  - server_name: "grafana.{{ domain_name }}"
    proxy_pass: "http://127.0.0.1:3000"
    proxy_ssl: false
    description: "Grafana"

  - server_name: "prometheus.{{ domain_name }}"
    proxy_pass: "http://127.0.0.1:9090"
    proxy_ssl: false
    auth_basic: true
    auth_basic_realm: "Prometheus"
    auth_basic_file: "/etc/nginx/.htpasswd_prometheus"
    description: "Prometheus (password protected)"

# Security headers
nginx_security_headers:
  X-Frame-Options: "SAMEORIGIN"
  X-Content-Type-Options: "nosniff"
  X-XSS-Protection: "1; mode=block"
  Referrer-Policy: "strict-origin-when-cross-origin"
  Content-Security-Policy: "default-src 'self' 'unsafe-inline' 'unsafe-eval'; img-src 'self' data: https:; font-src 'self' data: https:;"
  Permissions-Policy: "camera=(), microphone=(), geolocation=()"
  Strict-Transport-Security: "max-age=31536000; includeSubDomains; preload"

# Rate limiting
nginx_rate_limit: "10r/s"
nginx_rate_limit_burst: 20

# DDoS protection basics
nginx_limit_conn: 100
nginx_client_max_body_size: "10m"
nginx_client_body_timeout: 30
nginx_client_header_timeout: 30
